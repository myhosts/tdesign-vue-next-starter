import{e as p,h as G,d as tt,i as et,j as B,k as at,n as rt,l as ot,w as A,m as it,o as D,c as I,a as g,p as m,u as v,q as R,s as S,F as V,v as W,b as w,x as O,t as P,y as st,f as $,g as nt}from"./index-Ml_qX-84.js";import{P as lt}from"./index-MnHm0Amu.js";import{T as dt}from"./index-Bm6LPhrA.js";import{L as H}from"./date-Dv7FH39n.js";import{_ as z,c as pt,S as ct,B as ut,P as ht,G as gt,a as ft,g as mt,p as Z,b as yt,C as vt,u as K,d as F,e as d,f as _t,i as bt,h as St,j as U}from"./charts-JWXmVNkS.js";import{i as Dt,a as wt,b as xt,c as Ct}from"./install-QUJsnd72.js";import"./shop-b7UoRulk.js";import"./service-DOdrDtp5.js";import"./user-avatar-CH_CrVAI.js";import"./laptop-alIh1JXd.js";import"./more-vY2AElRR.js";var Lt=function(s){z(e,s);function e(){var t=s!==null&&s.apply(this,arguments)||this;return t.type=e.type,t.hasSymbolVisual=!0,t}return e.prototype.getInitialData=function(t,a){return pt(null,this,{useEncodeDefaulter:!0})},e.prototype.getProgressive=function(){var t=this.option.progressive;return t??(this.option.large?5e3:this.get("progressive"))},e.prototype.getProgressiveThreshold=function(){var t=this.option.progressiveThreshold;return t??(this.option.large?1e4:this.get("progressiveThreshold"))},e.prototype.brushSelector=function(t,a,r){return r.point(a.getItemLayout(t))},e.prototype.getZLevelKey=function(){return this.getData().count()>this.getProgressiveThreshold()?this.id:""},e.type="series.scatter",e.dependencies=["grid","polar","geo","singleAxis","calendar"],e.defaultOption={coordinateSystem:"cartesian2d",z:2,legendHoverLink:!0,symbolSize:10,large:!1,largeThreshold:2e3,itemStyle:{opacity:.8},emphasis:{scale:!0},clip:!0,select:{itemStyle:{borderColor:"#212121"}},universalTransition:{divideShape:"clone"}},e}(ct),J=4,Tt=function(){function s(){}return s}(),At=function(s){z(e,s);function e(t){var a=s.call(this,t)||this;return a._off=0,a.hoverDataIdx=-1,a}return e.prototype.getDefaultShape=function(){return new Tt},e.prototype.reset=function(){this.notClear=!1,this._off=0},e.prototype.buildPath=function(t,a){var r=a.points,o=a.size,i=this.symbolProxy,n=i.shape,c=t.getContext?t.getContext():t,l=c&&o[0]<J,h=this.softClipShape,u;if(l){this._ctx=c;return}for(this._ctx=null,u=this._off;u<r.length;){var f=r[u++],_=r[u++];isNaN(f)||isNaN(_)||h&&!h.contain(f,_)||(n.x=f-o[0]/2,n.y=_-o[1]/2,n.width=o[0],n.height=o[1],i.buildPath(t,n,!0))}this.incremental&&(this._off=u,this.notClear=!0)},e.prototype.afterBrush=function(){var t=this.shape,a=t.points,r=t.size,o=this._ctx,i=this.softClipShape,n;if(o){for(n=this._off;n<a.length;){var c=a[n++],l=a[n++];isNaN(c)||isNaN(l)||i&&!i.contain(c,l)||o.fillRect(c-r[0]/2,l-r[1]/2,r[0],r[1])}this.incremental&&(this._off=n,this.notClear=!0)}},e.prototype.findDataIndex=function(t,a){for(var r=this.shape,o=r.points,i=r.size,n=Math.max(i[0],4),c=Math.max(i[1],4),l=o.length/2-1;l>=0;l--){var h=l*2,u=o[h]-n/2,f=o[h+1]-c/2;if(t>=u&&a>=f&&t<=u+n&&a<=f+c)return l}return-1},e.prototype.contain=function(t,a){var r=this.transformCoordToLocal(t,a),o=this.getBoundingRect();if(t=r[0],a=r[1],o.contain(t,a)){var i=this.hoverDataIdx=this.findDataIndex(t,a);return i>=0}return this.hoverDataIdx=-1,!1},e.prototype.getBoundingRect=function(){var t=this._rect;if(!t){for(var a=this.shape,r=a.points,o=a.size,i=o[0],n=o[1],c=1/0,l=1/0,h=-1/0,u=-1/0,f=0;f<r.length;){var _=r[f++],x=r[f++];c=Math.min(_,c),h=Math.max(_,h),l=Math.min(x,l),u=Math.max(x,u)}t=this._rect=new ut(c-i/2,l-n/2,h-c+i,u-l+n)}return t},e}(ht),It=function(){function s(){this.group=new gt}return s.prototype.updateData=function(e,t){this._clear();var a=this._create();a.setShape({points:e.getLayout("points")}),this._setCommon(a,e,t)},s.prototype.updateLayout=function(e){var t=e.getLayout("points");this.group.eachChild(function(a){if(a.startIndex!=null){var r=(a.endIndex-a.startIndex)*2,o=a.startIndex*4*2;t=new Float32Array(t.buffer,o,r)}a.setShape("points",t),a.reset()})},s.prototype.incrementalPrepareUpdate=function(e){this._clear()},s.prototype.incrementalUpdate=function(e,t,a){var r=this._newAdded[0],o=t.getLayout("points"),i=r&&r.shape.points;if(i&&i.length<2e4){var n=i.length,c=new Float32Array(n+o.length);c.set(i),c.set(o,n),r.endIndex=e.end,r.setShape({points:c})}else{this._newAdded=[];var l=this._create();l.startIndex=e.start,l.endIndex=e.end,l.incremental=!0,l.setShape({points:o}),this._setCommon(l,t,a)}},s.prototype.eachRendered=function(e){this._newAdded[0]&&e(this._newAdded[0])},s.prototype._create=function(){var e=new At({cursor:"default"});return e.ignoreCoarsePointer=!0,this.group.add(e),this._newAdded.push(e),e},s.prototype._setCommon=function(e,t,a){var r=t.hostModel;a=a||{};var o=t.getVisual("symbolSize");e.setShape("size",o instanceof Array?o:[o,o]),e.softClipShape=a.clipShape||null,e.symbolProxy=ft(t.getVisual("symbol"),0,0,0,0),e.setColor=e.symbolProxy.setColor;var i=e.shape.size[0]<J;e.useStyle(r.getModel("itemStyle").getItemStyle(i?["color","shadowBlur","shadowColor"]:["color"]));var n=t.getVisual("style"),c=n&&n.fill;c&&e.setColor(c);var l=mt(e);l.seriesIndex=r.seriesIndex,e.on("mousemove",function(h){l.dataIndex=null;var u=e.hoverDataIdx;u>=0&&(l.dataIndex=u+(e.startIndex||0))})},s.prototype.remove=function(){this._clear()},s.prototype._clear=function(){this._newAdded=[],this.group.removeAll()},s}(),Pt=function(s){z(e,s);function e(){var t=s!==null&&s.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.render=function(t,a,r){var o=t.getData(),i=this._updateSymbolDraw(o,t);i.updateData(o,{clipShape:this._getClipShape(t)}),this._finished=!0},e.prototype.incrementalPrepareRender=function(t,a,r){var o=t.getData(),i=this._updateSymbolDraw(o,t);i.incrementalPrepareUpdate(o),this._finished=!1},e.prototype.incrementalRender=function(t,a,r){this._symbolDraw.incrementalUpdate(t,a.getData(),{clipShape:this._getClipShape(a)}),this._finished=t.end===a.getData().count()},e.prototype.updateTransform=function(t,a,r){var o=t.getData();if(this.group.dirty(),!this._finished||o.count()>1e4)return{update:!0};var i=Z("").reset(t,a,r);i.progress&&i.progress({start:0,end:o.count(),count:o.count()},o),this._symbolDraw.updateLayout(o)},e.prototype.eachRendered=function(t){this._symbolDraw&&this._symbolDraw.eachRendered(t)},e.prototype._getClipShape=function(t){var a=t.coordinateSystem,r=a&&a.getArea&&a.getArea();return t.get("clip",!0)?r:null},e.prototype._updateSymbolDraw=function(t,a){var r=this._symbolDraw,o=a.pipelineContext,i=o.large;return(!r||i!==this._isLargeDraw)&&(r&&r.remove(),r=this._symbolDraw=i?new It:new yt,this._isLargeDraw=i,this.group.removeAll()),this.group.add(r.group),r},e.prototype.remove=function(t,a){this._symbolDraw&&this._symbolDraw.remove(!0),this._symbolDraw=null},e.prototype.dispose=function(){},e.type="scatter",e}(vt);function zt(s){K(Dt),s.registerSeriesModel(Lt),s.registerChartView(Pt),s.registerLayout(Z("scatter"))}const Mt=[{title:p("pages.dashboardDetail.topPanel.paneList.totalRequest"),number:"1126",upTrend:"10%"},{title:p("pages.dashboardDetail.topPanel.paneList.suppliers"),number:"13",downTrend:"13%"},{title:p("pages.dashboardDetail.topPanel.paneList.productCategory"),number:"4",upTrend:"10%"},{title:p("pages.dashboardDetail.topPanel.paneList.applicant"),number:90,downTrend:"44%",leftType:"icon-file-paste"},{title:p("pages.dashboardDetail.topPanel.paneList.completionRate"),number:80.5,upTrend:"70%"},{title:p("pages.dashboardDetail.topPanel.paneList.arrivalRate"),number:78,upTrend:"16%"}],Nt=[{description:p("pages.dashboardDetail.sslDescription"),index:1,isSetup:!0,name:p("pages.dashboardDetail.ssl"),type:4},{description:p("pages.dashboardDetail.sslDescription"),index:1,isSetup:!0,name:p("pages.dashboardDetail.ssl"),type:4}];function j({dateTime:s=[],placeholderColor:e,borderColor:t}){const r=[],o=[],i=[];for(let n=0;n<40;n++){if(s.length>0){const c=(new Date(s[1]).getTime()-new Date(s[0]).getTime())/40,l=new Date(s[0]).getTime()+c*n;r.push(F(l).format("MM-DD"))}else r.push(F().subtract(40-n,"day").format("MM-DD"));o.push(d().toString()),i.push(d().toString())}return{color:G(),xAxis:{data:r,axisLabel:{color:e},splitLine:{show:!1},axisLine:{lineStyle:{color:t,width:1}}},yAxis:{type:"value",axisLabel:{color:e},nameTextStyle:{padding:[0,0,0,60]},axisTick:{show:!1,axisLine:{show:!1}},axisLine:{show:!1},splitLine:{lineStyle:{color:t}}},tooltip:{trigger:"item"},grid:{top:"5px",left:"25px",right:"5px",bottom:"60px"},legend:{left:"center",bottom:"0",orient:"horizontal",data:[p("pages.dashboardDetail.procurement.goods.massageMachine"),p("pages.dashboardDetail.procurement.goods.coffeeMachine")],itemHeight:8,itemWidth:8,textStyle:{fontSize:12,color:e}},series:[{name:p("pages.dashboardDetail.procurement.goods.massageMachine"),symbolSize:10,data:i.reverse(),type:"scatter"},{name:p("pages.dashboardDetail.procurement.goods.coffeeMachine"),symbolSize:10,data:o.concat(o.reverse()),type:"scatter"}]}}function q({dateTime:s=[],placeholderColor:e,borderColor:t}){let a=[];for(let r=1;r<7;r++)a.push(p(`pages.dashboardDetail.chart.week${r}`));return s.length>0&&(a=_t(s,7)),{color:G(),grid:{top:"5%",right:"10px",left:"30px",bottom:"60px"},legend:{left:"center",bottom:"0",orient:"horizontal",data:[p("pages.dashboardDetail.procurement.goods.cup"),p("pages.dashboardDetail.procurement.goods.tea"),p("pages.dashboardDetail.procurement.goods.honey"),p("pages.dashboardDetail.procurement.goods.flour")],textStyle:{fontSize:12,color:e}},xAxis:{type:"category",data:a,boundaryGap:!1,axisLabel:{color:e},axisLine:{lineStyle:{color:t,width:1}}},yAxis:{type:"value",axisLabel:{color:e},splitLine:{lineStyle:{color:t}}},tooltip:{trigger:"item"},series:[{showSymbol:!0,symbol:"circle",symbolSize:8,name:p("pages.dashboardDetail.procurement.goods.cup"),stack:"总量",data:[d(),d(),d(),d(),d(),d(),d()],type:"line",itemStyle:{borderColor:t,borderWidth:1}},{showSymbol:!0,symbol:"circle",symbolSize:8,name:p("pages.dashboardDetail.procurement.goods.tea"),stack:"总量",data:[d(),d(),d(),d(),d(),d(),d()],type:"line",itemStyle:{borderColor:t,borderWidth:1}},{showSymbol:!0,symbol:"circle",symbolSize:8,name:p("pages.dashboardDetail.procurement.goods.honey"),stack:"总量",data:[d(),d(),d(),d(),d(),d(),d()],type:"line",itemStyle:{borderColor:t,borderWidth:1}},{showSymbol:!0,symbol:"circle",symbolSize:8,name:p("pages.dashboardDetail.procurement.goods.flour"),stack:"总量",data:[d(),d(),d(),d(),d(),d(),d()],type:"line",itemStyle:{borderColor:t,borderWidth:1}}]}}const kt={class:"dashboard-panel-detail"},Bt={class:"dashboard-list-card__number"},Rt={class:"dashboard-list-card__text"},Vt={class:"dashboard-list-card__text-left"},Wt={name:"DashboardDetail"},Ot=tt({...Wt,setup(s){K([wt,xt,Ct,bt,zt,St]);const e=et(),t=B(()=>e.chartColors);let a,r;const o=()=>{a=document.getElementById("lineContainer"),r=U(a),r.setOption(q({...t.value}))};let i,n;const c=()=>{i=document.getElementById("scatterContainer"),n=U(i),n.setOption(j({...t.value}))},l=()=>{r==null||r.resize({width:a.clientWidth,height:a.clientHeight}),n==null||n.resize({width:i.clientWidth,height:i.clientHeight})},h=()=>{c(),o()};at(()=>{h(),rt(()=>{l()})});const{width:u,height:f}=ot();A([u,f],()=>{l()}),it(()=>{_(),x()});const _=A(()=>e.mode,()=>{h()}),x=A(()=>e.brandTheme,()=>{st([r,n])}),Q=()=>{n.setOption(j({...t.value}))},Y=M=>{const b=B(()=>e.chartColors);r.setOption(q({dateTime:M,...b.value}))};return(M,b)=>{const E=S("t-icon"),C=S("t-card"),T=S("t-col"),N=S("t-row"),k=S("t-date-range-picker"),X=S("t-button");return D(),I("div",kt,[g(C,{title:v(p)("pages.dashboardDetail.topPanel.title"),class:"dashboard-detail-card",bordered:!1},{default:m(()=>[g(N,{gutter:[16,16]},{default:m(()=>[(D(!0),I(V,null,W(v(Mt),(y,L)=>(D(),$(T,{key:L,xs:6,xl:3},{default:m(()=>[g(C,{class:"dashboard-list-card",description:y.title},{default:m(()=>[w("div",Bt,P(y.number),1),w("div",Rt,[w("div",Vt,[O(P(v(p)("pages.dashboardDetail.topPanel.quarter"))+" ",1),g(dt,{class:"icon",type:y.upTrend?"up":"down",describe:y.upTrend||y.downTrend},null,8,["type","describe"])]),g(E,{name:"chevron-right"})])]),_:2},1032,["description"])]),_:2},1024))),128))]),_:1})]),_:1},8,["title"]),g(N,{gutter:[16,16],class:"row-margin"},{default:m(()=>[g(T,{xs:12,xl:9},{default:m(()=>[g(C,{class:"dashboard-detail-card",title:v(p)("pages.dashboardDetail.procurement.title"),bordered:!1},{actions:m(()=>[g(k,{class:"card-date-picker-container","default-value":v(H),theme:"primary",mode:"date",style:{width:"248px"},onChange:b[0]||(b[0]=y=>Y(y))},null,8,["default-value"])]),default:m(()=>[b[1]||(b[1]=w("div",{id:"lineContainer",style:{width:"100%",height:"416px"}},null,-1))]),_:1},8,["title"])]),_:1}),g(T,{xs:12,xl:3},{default:m(()=>[(D(!0),I(V,null,W(v(Nt),(y,L)=>(D(),$(lt,{key:L,product:y,class:R({"row-margin":L!==0,"product-card":!0})},null,8,["product","class"]))),128))]),_:1})]),_:1}),g(C,{class:R(["dashboard-detail-card","row-margin"]),title:v(p)("pages.dashboardDetail.satisfaction.title"),bordered:!1},{actions:m(()=>[g(k,{class:"card-date-picker-container","default-value":v(H),theme:"primary",mode:"date",style:{display:"inline-block","margin-right":"var(--td-comp-margin-s)",width:"248px"},onChange:Q},null,8,["default-value"]),g(X,{class:"card-date-button"},{default:m(()=>[O(P(v(p)("pages.dashboardDetail.satisfaction.export")),1)]),_:1})]),default:m(()=>[b[2]||(b[2]=w("div",{id:"scatterContainer",style:{width:"100%",height:"434px"}},null,-1))]),_:1},8,["title"])])}}}),Yt=nt(Ot,[["__scopeId","data-v-ee15c138"]]);export{Yt as default};
