import{a as F}from"./list-C-jGMewC.js";import{P as j}from"./index-MnHm0Amu.js";import{d as E,r as n,j as O,k as q,s,o as i,c as d,b as p,a as l,p as v,x as G,t as H,u as x,e as b,f as y,a3 as J,O as z,F as V,v as K,P as Q,g as R}from"./index-Ml_qX-84.js";import{_ as W}from"./DialogForm.vue_vue_type_script_setup_true_lang-Mf151DxD.js";import"./shop-b7UoRulk.js";import"./service-DOdrDtp5.js";import"./user-avatar-CH_CrVAI.js";import"./laptop-alIh1JXd.js";import"./more-vY2AElRR.js";const X={class:"list-card-operation"},Y={class:"search-input"},Z={class:"list-card-items"},ee={class:"list-card-pagination"},te={key:1,class:"list-card-loading"},ae={name:"ListCard"},oe=E({...ae,setup(ne){const C={name:"",status:"",description:"",type:"0",mark:"",amount:0},t=n({current:1,pageSize:12,total:0}),r=n(void 0),m=n([]),_=n(!0),k=async()=>{try{const{list:e}=await F();m.value=e,t.value={...t.value,total:e.length}}catch(e){console.log(e)}finally{_.value=!1}},S=O(()=>r.value?`确认删除后${r.value.name}的所有产品信息将被清空, 且无法恢复`:"");q(()=>{k()});const u=n(!1),g=n(""),c=n(!1),f=n({...C}),h=e=>{t.value.pageSize=e,t.value.current=1},D=e=>{t.value.current=e},P=e=>{c.value=!0,r.value=e},I=()=>{const{index:e}=r.value;m.value.splice(e-1,1),c.value=!1,Q.success("删除成功")},L=()=>{r.value=void 0,f.value={...C}},B=e=>{u.value=!0,f.value={name:e.name,status:e!=null&&e.isSetup?"1":"0",description:e.description,type:e.type.toString(),mark:"",amount:0}};return(e,o)=>{const N=s("t-button"),U=s("t-input"),w=s("t-col"),M=s("t-row"),A=s("t-pagination"),T=s("t-loading"),$=s("t-dialog");return i(),d("div",null,[p("div",X,[l(N,{onClick:o[0]||(o[0]=a=>u.value=!0)},{default:v(()=>[G(H(x(b)("pages.listCard.create")),1)]),_:1}),p("div",Y,[l(U,{modelValue:g.value,"onUpdate:modelValue":o[1]||(o[1]=a=>g.value=a),placeholder:x(b)("pages.listCard.placeholder"),clearable:""},{"suffix-icon":v(()=>[g.value===""?(i(),y(x(J),{key:0,size:"var(--td-comp-size-xxxs)"})):z("",!0)]),_:1},8,["modelValue","placeholder"])])]),l(W,{visible:u.value,"onUpdate:visible":o[2]||(o[2]=a=>u.value=a),data:f.value},null,8,["visible","data"]),t.value.total>0&&!_.value?(i(),d(V,{key:0},[p("div",Z,[l(M,{gutter:[16,16]},{default:v(()=>[(i(!0),d(V,null,K(m.value.slice(t.value.pageSize*(t.value.current-1),t.value.pageSize*t.value.current),a=>(i(),y(w,{key:a.index,lg:4,xs:6,xl:3},{default:v(()=>[l(j,{class:"list-card-item",product:a,onDeleteItem:P,onManageProduct:B},null,8,["product"])]),_:2},1024))),128))]),_:1})]),p("div",ee,[l(A,{modelValue:t.value.current,"onUpdate:modelValue":o[3]||(o[3]=a=>t.value.current=a),"page-size":t.value.pageSize,"onUpdate:pageSize":o[4]||(o[4]=a=>t.value.pageSize=a),total:t.value.total,"page-size-options":[12,24,36],onPageSizeChange:h,onCurrentChange:D},null,8,["modelValue","page-size","total"])])],64)):_.value?(i(),d("div",te,[l(T,{size:"large",text:"加载数据中..."})])):z("",!0),l($,{visible:c.value,"onUpdate:visible":o[5]||(o[5]=a=>c.value=a),header:"确认删除所选产品？",body:S.value,"on-cancel":L,onConfirm:I},null,8,["visible","body"])])}}}),me=R(oe,[["__scopeId","data-v-e7c59698"]]);export{me as default};
