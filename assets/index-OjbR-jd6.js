import{d as ee,i as te,e as t,r as g,j as w,k as ae,M as se,a2 as ne,s as d,o as c,c as _,a as o,p as n,b as P,x as u,t as l,u as e,O as r,a3 as le,a4 as y,f as v,a5 as k,a6 as I,P as oe,g as ie}from"./index-Ml_qX-84.js";import{g as ce}from"./list-C-jGMewC.js";import{T as A}from"./index-Bm6LPhrA.js";const ue={class:"left-operation-container"},re={key:0,class:"selected-count"},de={class:"search-input"},pe={key:0},ge={key:1},_e={key:2},fe={key:0,class:"payment-col"},me={key:1,class:"payment-col"},he={name:"ListBase"},ye=ee({...he,setup(ve){const K=te(),U=[{colKey:"row-select",type:"multiple",width:64,fixed:"left"},{title:t("pages.listBase.contractName"),align:"left",width:320,colKey:"name",fixed:"left"},{title:t("pages.listBase.contractStatus"),colKey:"status",width:160},{title:t("pages.listBase.contractNum"),width:160,ellipsis:!0,colKey:"no"},{title:t("pages.listBase.contractType"),width:160,ellipsis:!0,colKey:"contractType"},{title:t("pages.listBase.contractPayType"),width:160,ellipsis:!0,colKey:"paymentType"},{title:t("pages.listBase.contractAmount"),width:160,ellipsis:!0,colKey:"amount"},{title:t("pages.listBase.operation"),align:"left",fixed:"right",width:160,colKey:"op"}],m=g([]),T=g({defaultPageSize:20,total:100,defaultCurrent:1}),x=g(""),B=g(!1),V=async()=>{B.value=!0;try{const{list:s}=await ce();m.value=s,T.value={...T.value,total:s.length}}catch(s){console.log(s)}finally{B.value=!1}},f=g(-1),D=w(()=>{if(f.value>-1){const{name:s}=m.value[f.value];return`删除后，${s}的所有合同信息将被清空，且无法恢复`}return""});ae(()=>{V()});const C=g(!1),p=g([1,2]),S=se(),E=()=>{f.value=-1},M=()=>{m.value.splice(f.value,1),T.value.total=m.value.length;const s=p.value.indexOf(f.value);s>-1&&p.value.splice(s,1),C.value=!1,oe.success("删除成功"),E()},R=()=>{E()},L="index",O=s=>{p.value=s},Y=(s,i)=>{console.log("分页变化",s,i)},$=(s,i)=>{console.log("统一Change",s,i)},G=()=>{S.push("/detail/base")},j=()=>{S.push("/form/base")},z=s=>{f.value=s.rowIndex,C.value=!0},F=w(()=>({offsetTop:K.isUseTabsRouter?48:0,container:`.${ne}-layout`}));return(s,i)=>{const b=d("t-button"),X=d("t-input"),H=d("t-row"),h=d("t-tag"),N=d("t-link"),q=d("t-space"),J=d("t-table"),Q=d("t-card"),W=d("t-dialog");return c(),_("div",null,[o(Q,{class:"list-card-container",bordered:!1},{default:n(()=>[o(H,{justify:"space-between"},{default:n(()=>[P("div",ue,[o(b,{onClick:j},{default:n(()=>[u(l(e(t)("pages.listBase.create")),1)]),_:1}),o(b,{variant:"base",theme:"default",disabled:!p.value.length},{default:n(()=>[u(l(e(t)("pages.listBase.export")),1)]),_:1},8,["disabled"]),p.value.length?(c(),_("p",re,l(e(t)("pages.listBase.select"))+" "+l(p.value.length)+" "+l(e(t)("pages.listBase.items")),1)):r("",!0)]),P("div",de,[o(X,{modelValue:x.value,"onUpdate:modelValue":i[0]||(i[0]=a=>x.value=a),placeholder:e(t)("pages.listBase.placeholder"),clearable:""},{"suffix-icon":n(()=>[o(e(le),{size:"16px"})]),_:1},8,["modelValue","placeholder"])])]),_:1}),o(J,{data:m.value,columns:U,"row-key":L,"vertical-align":"top",hover:!0,pagination:T.value,"selected-row-keys":p.value,loading:B.value,"header-affixed-top":F.value,onPageChange:Y,onChange:$,onSelectChange:i[2]||(i[2]=a=>O(a))},{status:n(({row:a})=>[a.status===e(y).FAIL?(c(),v(h,{key:0,theme:"danger",variant:"light"},{default:n(()=>[u(l(e(t)("pages.listBase.contractStatusEnum.fail")),1)]),_:1})):r("",!0),a.status===e(y).AUDIT_PENDING?(c(),v(h,{key:1,theme:"warning",variant:"light"},{default:n(()=>[u(l(e(t)("pages.listBase.contractStatusEnum.audit")),1)]),_:1})):r("",!0),a.status===e(y).EXEC_PENDING?(c(),v(h,{key:2,theme:"warning",variant:"light"},{default:n(()=>[u(l(e(t)("pages.listBase.contractStatusEnum.pending")),1)]),_:1})):r("",!0),a.status===e(y).EXECUTING?(c(),v(h,{key:3,theme:"success",variant:"light"},{default:n(()=>[u(l(e(t)("pages.listBase.contractStatusEnum.executing")),1)]),_:1})):r("",!0),a.status===e(y).FINISH?(c(),v(h,{key:4,theme:"success",variant:"light"},{default:n(()=>[u(l(e(t)("pages.listBase.contractStatusEnum.finish")),1)]),_:1})):r("",!0)]),contractType:n(({row:a})=>[a.contractType===e(k).MAIN?(c(),_("p",pe,l(e(t)("pages.listBase.contractStatusEnum.fail")),1)):r("",!0),a.contractType===e(k).SUB?(c(),_("p",ge,l(e(t)("pages.listBase.contractStatusEnum.audit")),1)):r("",!0),a.contractType===e(k).SUPPLEMENT?(c(),_("p",_e,l(e(t)("pages.listBase.contractStatusEnum.pending")),1)):r("",!0)]),paymentType:n(({row:a})=>[a.paymentType===e(I).PAYMENT?(c(),_("div",fe,[u(l(e(t)("pages.listBase.pay")),1),o(A,{class:"dashboard-item-trend",type:"up"})])):r("",!0),a.paymentType===e(I).RECEIPT?(c(),_("div",me,[u(l(e(t)("pages.listBase.receive")),1),o(A,{class:"dashboard-item-trend",type:"down"})])):r("",!0)]),op:n(a=>[o(q,null,{default:n(()=>[o(N,{theme:"primary",onClick:i[1]||(i[1]=Z=>G())},{default:n(()=>[u(l(e(t)("pages.listBase.detail")),1)]),_:1}),o(N,{theme:"danger",onClick:Z=>z(a)},{default:n(()=>[u(l(e(t)("pages.listBase.delete")),1)]),_:2},1032,["onClick"])]),_:2},1024)]),_:1},8,["data","pagination","selected-row-keys","loading","header-affixed-top"])]),_:1}),o(W,{visible:C.value,"onUpdate:visible":i[3]||(i[3]=a=>C.value=a),header:"确认删除当前所选合同？",body:D.value,"on-cancel":R,onConfirm:M},null,8,["visible","body"])])}}}),ke=ie(ye,[["__scopeId","data-v-d384f849"]]);export{ke as default};
